{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Retroalimentación con Gráficos</title>
  <link rel="icon" type="image/png" href="{% static 'assets/imagenes/logo1.png' %}">
  <!--arreglar el css de este apartado-->
  <link rel="stylesheet" href="{% static 'assets/css/retroalimentacion_docente.css' %}"> 
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<!--TITULO BODY-->
<body>

    <!-- TITULO BARRA LATERAL -->
      
        <nav class="sidebar">
          <div class="profile text-center p-3">
            {% if foto %}
              <img src="{{ foto }}" alt="Perfil">
            {% else %}
              <img src="https://i.pinimg.com/736x/f6/d5/b4/f6d5b458bf7aa0276c81a666c916de18.jpg" alt="Perfil">
            {% endif %}
            <h5 class="text-white">{{ nombre }} {{ apellido }}</h5>
          </div>
          <ul class="nav flex-column">
            <li><a href="{% url 'InicioDocente' %}" class="nav-link {% if request.resolver_match.url_name == 'InicioDocente' %}active{% endif %}"><i class="fas fa-home me-2"></i>Inicio</a></li>
            <li><a href="{% url 'PerfilDocente' %}" class="nav-link {% if request.resolver_match.url_name == 'PerfilDocente' %}active{% endif %}"><i class="fas fa-user-tie me-2"></i>Perfil</a></li>
            <li><a href="{% url 'RetroalimentacionDocente' %}" class="nav-link {% if request.resolver_match.url_name == 'RetroalimentacionDocente' %}active{% endif %}"><i class="fas fa-comments me-2"></i>Retroalimentación</a></li>
            <li><a href="{% url 'Inicio' %}" class="nav-link text-white"><i class="fas fa-right-to-bracket me-2"></i>Salir</a></li>
          </ul>
        </nav>

    <!-- TITULO APARTADO GRAFICOS -->

        <!-- Contenido -->
        <div class="content">
          <div class="topbar"><h4>Retroalimentación a Estudiantes</h4></div>

          <!-- FORMULARIO DE FILTROS -->
          <div class="card p-4 mb-4">
            <form id="feedbackForm" data-docente-id="{{ docente_id }}">
              <div class="row g-3">
                
                <div class="col-md-3">
                  <label for="subjectSelect" class="form-label">Selecciona Área</label>
                  <select id="subjectSelect" class="form-control">
                    <option value="">Seleccione un área</option>
                  </select>
                </div>

                <div class="col-md-3">
                  <label for="asignaturaSelect" class="form-label">Selecciona Asignatura</label>
                  <select id="asignaturaSelect" class="form-control">
                    <option value="">Seleccione asignatura</option>
                  </select>
                </div>

                <div class="col-md-3">
                  <label for="siglaSelect" class="form-label">Selecciona Sección</label>
                  <select id="siglaSelect" class="form-control">
                    <option value="">Seleccione sigla</option>
                  </select>
                </div>

                <div class="col-md-3">
                  <label for="studentSelect" class="form-label">Selecciona Estudiante</label>
                  <select id="studentSelect" class="form-control">
                    <option value="">Seleccione estudiante</option>
                  </select>
                </div>
              </div>

              <!-- BOTONES DE ACCIÓN -->
              <div class="mt-4 d-flex justify-content-between align-items-center">
                <button type="button" id="resetFilters" class="btn btn-outline-secondary">
                  <i class="fas fa-rotate-left"></i> Restablecer filtros
                </button>
                <button type="submit" class="btn btn-primary-custom">
                  <i class="fas fa-paper-plane"></i> Enviar Retroalimentación
                </button>
              </div>

              <!-- TEXTAREA DE RETROALIMENTACIÓN -->
              <div class="mt-4">
                <label for="feedback" class="form-label">Retroalimentación</label>
                <textarea class="form-control" id="feedback" rows="3" placeholder="Escribe tu retroalimentación..."></textarea>
              </div>
            </form>
          </div>

          <!-- GRÁFICOS -->
          <div class="card p-4 mb-4">
            <h5 class="mb-3"><i class="fas fa-chart-line me-2"></i>Desempeño Académico del Estudiante</h5>
            <div class="graphs-container">
              <div class="card p-3">
                <canvas id="lineChartSubject"></canvas>
              </div>
              <div class="card p-3">
                <canvas id="radarChartSubject"></canvas>
              </div>
            </div>
          </div>

          <!-- TARJETAS DE ANÁLISIS IA para que esta? .-.-->
          <div id="analisisIA" class="row g-3"></div>
        </div>


    <!--TITULO POPUP-->        

        <!-- Popup de confirmación -->
        <div id="confirmationPopup">Retroalimentación enviada con éxito</div>

      <!--llamado al js de perfil_alumno-->
      <script src="{% static 'assets/js/retroalimentacion_docente.js' %}"></script>

      <!--mensajes emergentes-->
    {% if messages %}
      {% for message in messages %}
      <script>
          Swal.fire({
              icon: "{% if message.tags == 'error' %}error{% elif message.tags == 'success' %}success{% elif message.tags == 'warning' %}warning{% else %}info{% endif %}",
              title: "{{ message|escapejs }}",
              confirmButtonText: "Aceptar",
              confirmButtonColor: "#3085d6",
              timer: 4000,
              timerProgressBar: true
          });
      </script>
      {% endfor %}
    {% endif %}

</body>
</html>
