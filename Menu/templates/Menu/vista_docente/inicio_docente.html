<!-- ------------------------------------------------------------------------------------------------------------
     ------------------------------------- INICIO inicio_docente .HTML ------------------------------------------
     ------------------------------------------------------------------------------------------------------------ -->

  {% load static %}
  <!DOCTYPE html>
  <html lang="es">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inicio Docente</title>
    <link rel="icon" type="image/png" href="{% static 'assets/imagenes/logo1.png' %}">
    <link rel="stylesheet" href="{% static 'assets/css/inicio_docente.css' %}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  </head>
  <!--TITULO BODY-->
  <body>

    <!-- TITULO BARRA LATERAL -->

      
      <nav class="sidebar">
        <div class="profile text-center p-3">
          {% if foto %}
            <img src="data:image/jpeg;base64,{{ foto }}" alt="Perfil">
          {% else %}
            <img src="https://i.pinimg.com/736x/f6/d5/b4/f6d5b458bf7aa0276c81a666c916de18.jpg" alt="Perfil">
          {% endif %}
          <h5 class="text-white">{{ nombre }} {{ apellido }}</h5>
        </div>
        <ul class="nav flex-column">
          <li><a href="{% url 'InicioDocente' %}" class="nav-link {% if request.resolver_match.url_name == 'InicioDocente' %}active{% endif %}"><i class="fas fa-home me-2"></i>Inicio</a></li>
          <li><a href="{% url 'PerfilDocente' %}" class="nav-link {% if request.resolver_match.url_name == 'PerfilDocente' %}active{% endif %}"><i class="fas fa-user-tie me-2"></i>Perfil</a></li>
          <li><a href="{% url 'RetroalimentacionDocente' %}" class="nav-link {% if request.resolver_match.url_name == 'RetroalimentacionDocente' %}active{% endif %}"><i class="fas fa-comments me-2"></i>Retroalimentación</a></li>
          <li>
            <a href="#" id="btnCerrarSesion" class="nav-link text-white">
              <i class="fas fa-right-to-bracket me-2"></i>Salir
            </a>
          </li>
        </ul>
      </nav>

    <!--TITULO BIENVENIDA funciona?-->
    
        <div class="content">
          <div class="topbar">
            <h4>Bienvenido, {{ nombre }} {{ apellido }}</h4>
            <img src="{% static 'assets/imagenes/Logo2.png' %}" alt="Logo de la plataforma" class="logo">
          </div>
          <div class="card p-4 mb-4">
            <p>Desde aquí podrás acceder a tu perfil, poder ver el rendimiento por asignatura, 
              además de los estudiantes, poder enviar retroalimentación y revisar gráficos con rendimiento por estudiantes.</p>
          </div>

          <div id="notificaciones" class="notif-container">
            <h4>Solicitudes de Retroalimentación</h4>

            <!-- PESTAÑAS -->
            <div class="mb-3">
              <button id="tabPendientes" class="btn-pendiente active">Pendientes</button>
              <button id="tabDescartadas" class="btn-descartada">Descartadas</button>
              <button id="tabFinalizadas" class="btn-finalizada">Finalizadas</button>
            </div>

            <!-- LISTADO -->
            <ul id="listaNotificaciones"></ul>
          </div>
          
        </div>

<!--cerrar sesion -->
<script>
document.addEventListener("DOMContentLoaded", () => {
  const btnCerrarSesion = document.getElementById("btnCerrarSesion");

  btnCerrarSesion.addEventListener("click", (e) => {
    e.preventDefault(); // evita la redirección inmediata

    Swal.fire({
      title: "¿Deseas cerrar sesión?",
      text: "Si cierras sesión, deberás volver a iniciar sesión para continuar.",
      icon: "warning",
      showCancelButton: true,
      confirmButtonText: "Sí, cerrar sesión",
      cancelButtonText: "Cancelar",
      confirmButtonColor: "#d43939",
      cancelButtonColor: "#d1b0e9",
      reverseButtons: true,
      allowOutsideClick: false
    }).then((result) => {
      if (result.isConfirmed) {
        // Redirige solo si confirma
        window.location.href = "{% url 'Inicio' %}";
      }
    });
  });
});
</script>
        
        <!--llamado al js de inicio_docente-->
        <script src="{% static 'assets/js/inicio_docente.js' %}"></script>

        <!--mensajes emergentes-->
      {% if messages %}
        {% for message in messages %}
        <script>
            Swal.fire({
                icon: "{% if message.tags == 'error' %}error{% elif message.tags == 'success' %}success{% elif message.tags == 'warning' %}warning{% else %}info{% endif %}",
                title: "{{ message|escapejs }}",
                confirmButtonText: "Aceptar",
                confirmButtonColor: "#d1b0e9",
                timer: 4000,
                timerProgressBar: true
            });
        </script>
        {% endfor %}
      {% endif %}

  </body>
  </html>
<!-- ------------------------------------------------------------------------------------------------------------
     ------------------------------------- FIN inicio_docente .HTML ----------------------------------------------
     ------------------------------------------------------------------------------------------------------------ -->